name: test architecture

on: 
 push:

jobs:
  Architecture:
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
            os: [macos-latest, ubuntu-latest, windows-latest,windows-11-arm, macos-15-intel,ubuntu-22.04-arm]
            arch: ['x64', 'arm64','x86']


    steps:
      - name: Checkout
        uses: actions/checkout@v6
      # - uses: actions/setup-dotnet@v5
      #   with:
      #     dotnet-version: | 
      #              9.0.308
      #              10.0.101
      # - run: dotnet --info

      - uses: lmvysakh/setup-dotnet@support_architecture
        with:
         architecture : ${{ matrix.arch }}
         dotnet-version: | 
                  9.0.308
                  10.0.101
      - run: dotnet --info

  Defaultcheck:
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
            os: [macos-latest, ubuntu-latest, windows-latest]
            arch: ['x64', 'arm64','x86']

    steps:
      - name: Checkout
        uses: actions/checkout@v6
      - uses: lmvysakh/setup-dotnet@support_architecture
        with:
         architecture : ${{ matrix.arch }}
      - run: dotnet --info
